import{a as N}from"./chunk-UG2FS322.js";import{a as v,b as o,d as y,e as h,g as C,h as _,i as S,j as k,n as w,o as M}from"./chunk-S33ANCWB.js";import{a as P}from"./chunk-HVD7EZ4V.js";import{Ca as p,Da as t,Ea as e,Fa as u,La as c,Mb as f,N as n,Nb as x,_a as r,ga as m,mb as g,nb as b,ra as d}from"./chunk-IKTNIUHG.js";var O=class s{fb=n(w);settings=n(N);toast=n(P);router=n(f);current=g(()=>this.settings.settings());form=this.fb.group({dailyLimit:this.fb.control(this.current().dailyLimit,[o.required,o.min(0)]),weeklyLimit:this.fb.control(this.current().weeklyLimit,[o.required,o.min(0)]),currency:this.fb.control(this.current().currency)});constructor(){b(()=>{let i=this.current();this.form.dirty||this.form.patchValue({dailyLimit:i.dailyLimit,weeklyLimit:i.weeklyLimit,currency:i.currency},{emitEvent:!1})})}async save(){if(this.form.invalid){this.form.markAllAsTouched();return}await this.settings.update(this.form.getRawValue()),this.toast.show("\u062A\u0645 \u062D\u0641\u0638 \u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A","success"),await this.router.navigateByUrl("/")}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=d({type:s,selectors:[["app-settings"]],decls:20,vars:1,consts:[[1,"head"],[1,"title"],[1,"subtitle"],["routerLink","/",1,"link"],[1,"form",3,"ngSubmit","formGroup"],[1,"field"],[1,"field__label"],["type","number","inputmode","decimal","formControlName","dailyLimit",1,"input"],["type","number","inputmode","decimal","formControlName","weeklyLimit",1,"input"],[1,"actions"],["type","submit",1,"btn","btn--primary"]],template:function(a,l){a&1&&(t(0,"section",0)(1,"div")(2,"h1",1),r(3,"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A"),e(),t(4,"div",2),r(5,"\u062D\u062F\u0648\u062F \u0627\u0644\u0635\u0631\u0641 \u0648\u0627\u0644\u062A\u0646\u0628\u064A\u0647\u0627\u062A"),e()(),t(6,"a",3),r(7,"\u0631\u062C\u0648\u0639"),e()(),t(8,"form",4),c("ngSubmit",function(){return l.save()}),t(9,"label",5)(10,"div",6),r(11,"\u0627\u0644\u062D\u062F \u0627\u0644\u064A\u0648\u0645\u064A (\u062C.\u0645)"),e(),u(12,"input",7),e(),t(13,"label",5)(14,"div",6),r(15,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064A (\u062C.\u0645)"),e(),u(16,"input",8),e(),t(17,"div",9)(18,"button",10),r(19,"\u062D\u0641\u0638"),e()()()),a&2&&(m(8),p("formGroup",l.form))},dependencies:[M,C,v,_,y,h,S,k,x],styles:[".head[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:14px}.title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:900;letter-spacing:-.02em}.subtitle[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:var(--muted)}.link[_ngcontent-%COMP%]{font-size:12px;text-decoration:none;color:var(--primary);padding:8px 10px;border-radius:12px;border:1px solid var(--border);background:var(--surface)}.form[_ngcontent-%COMP%]{border:1px solid var(--border);background:var(--surface);border-radius:18px;padding:14px;box-shadow:var(--shadow)}.field[_ngcontent-%COMP%]{display:grid;gap:8px;margin-bottom:12px}.field__label[_ngcontent-%COMP%]{font-size:12px;color:var(--muted)}.input[_ngcontent-%COMP%]{border:1px solid var(--border);background:color-mix(in srgb,var(--surface) 70%,var(--bg));border-radius:14px;padding:12px;font-size:14px;outline:none}.input[_ngcontent-%COMP%]:focus{border-color:color-mix(in srgb,var(--primary) 30%,var(--border));box-shadow:0 0 0 4px color-mix(in srgb,var(--primary) 12%,transparent)}.toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:14px;border:1px solid var(--border);background:color-mix(in srgb,var(--surface) 70%,var(--bg))}.actions[_ngcontent-%COMP%]{margin-top:12px}.btn[_ngcontent-%COMP%]{border:1px solid var(--border);background:transparent;color:var(--text);border-radius:14px;padding:10px 12px;cursor:pointer;font-weight:900}.btn--primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border-color:color-mix(in srgb,var(--primary) 60%,black);box-shadow:0 16px 30px #1e3a8a40}"]})};export{O as SettingsComponent};
