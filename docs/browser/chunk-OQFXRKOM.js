import{a as S}from"./chunk-UG2FS322.js";import{a as v,b as i,d as x,e as y,g as C,h as _,i as M,j as P,n as O,o as k}from"./chunk-S33ANCWB.js";import{a as w}from"./chunk-HVD7EZ4V.js";import{Ca as c,Da as t,Ea as e,Fa as s,La as p,Mb as f,N as o,Nb as h,_a as r,ga as d,mb as g,nb as b,ra as m}from"./chunk-IKTNIUHG.js";var N=class l{fb=o(O);settings=o(S);toast=o(w);router=o(f);current=g(()=>this.settings.settings());form=this.fb.group({dailyLimit:this.fb.control(this.current().dailyLimit,[i.required,i.min(0)]),weeklyLimit:this.fb.control(this.current().weeklyLimit,[i.required,i.min(0)]),currency:this.fb.control(this.current().currency)});constructor(){b(()=>{let n=this.current();this.form.dirty||this.form.patchValue({dailyLimit:n.dailyLimit,weeklyLimit:n.weeklyLimit,currency:n.currency},{emitEvent:!1})})}async save(){if(this.form.invalid){this.form.markAllAsTouched();return}await this.settings.update(this.form.getRawValue()),this.toast.show("\u062A\u0645 \u062D\u0641\u0638 \u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A","success"),await this.router.navigateByUrl("/")}static \u0275fac=function(a){return new(a||l)};static \u0275cmp=m({type:l,selectors:[["app-settings"]],decls:20,vars:1,consts:[[1,"head"],[1,"title"],[1,"subtitle"],["routerLink","/",1,"link"],[1,"form",3,"ngSubmit","formGroup"],[1,"field"],[1,"field__label"],["type","number","inputmode","decimal","formControlName","dailyLimit",1,"input"],["type","number","inputmode","decimal","formControlName","weeklyLimit",1,"input"],[1,"actions"],["type","submit",1,"btn","btn--primary"]],template:function(a,u){a&1&&(t(0,"section",0)(1,"div")(2,"h1",1),r(3,"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A"),e(),t(4,"div",2),r(5,"\u062D\u062F\u0648\u062F \u0627\u0644\u0635\u0631\u0641 \u0648\u0627\u0644\u062A\u0646\u0628\u064A\u0647\u0627\u062A"),e()(),t(6,"a",3),r(7,"\u0631\u062C\u0648\u0639"),e()(),t(8,"form",4),p("ngSubmit",function(){return u.save()}),t(9,"label",5)(10,"div",6),r(11,"\u0627\u0644\u062D\u062F \u0627\u0644\u064A\u0648\u0645\u064A (\u062C.\u0645)"),e(),s(12,"input",7),e(),t(13,"label",5)(14,"div",6),r(15,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064A (\u062C.\u0645)"),e(),s(16,"input",8),e(),t(17,"div",9)(18,"button",10),r(19,"\u062D\u0641\u0638"),e()()()),a&2&&(d(8),c("formGroup",u.form))},dependencies:[k,C,v,_,x,y,M,P,h],styles:['.head[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:.75rem;margin-bottom:1rem;animation:slideDown .4s ease-out}.title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:800;letter-spacing:-.02em;background:var(--primary-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.subtitle[_ngcontent-%COMP%]{margin-top:.25rem;font-size:.8125rem;color:var(--text-muted);font-weight:500}.link[_ngcontent-%COMP%]{font-size:.8125rem;text-decoration:none;color:var(--primary);padding:.5rem .75rem;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--surface);transition:all .25s ease;display:flex;align-items:center;gap:.375rem;font-weight:600}.link[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);transform:translate(-2px);box-shadow:var(--shadow-sm)}.form[_ngcontent-%COMP%]{border:1px solid var(--border);background:var(--surface);border-radius:var(--radius-xl);padding:1.5rem;box-shadow:var(--shadow-md);animation:scaleIn .3s ease-out;transition:all .3s ease}.form[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-lg)}.field[_ngcontent-%COMP%]{display:grid;gap:.5rem;margin-bottom:1.25rem;position:relative}.field__label[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary);font-weight:600;display:flex;align-items:center;gap:.375rem}.field__label[_ngcontent-%COMP%]:before{content:"";width:4px;height:4px;border-radius:50%;background:var(--primary)}.input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--border);background:var(--bg-secondary);border-radius:var(--radius-md);padding:.875rem 1rem;font-size:.9375rem;outline:none;color:var(--text-primary);transition:all .25s ease;font-family:inherit}.input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.input[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:var(--surface);box-shadow:0 0 0 3px color-mix(in srgb,var(--primary) 15%,transparent);transform:translateY(-1px)}.input[_ngcontent-%COMP%]:hover:not(:focus){border-color:var(--primary-light)}.toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--bg-secondary);cursor:pointer;transition:all .25s ease}.toggle[_ngcontent-%COMP%]:hover{background:var(--bg-primary);border-color:var(--primary-light)}.toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:44px;height:24px;appearance:none;background:var(--text-muted);border-radius:var(--radius-full);position:relative;cursor:pointer;transition:all .3s ease}.toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:before{content:"";position:absolute;width:18px;height:18px;background:#fff;border-radius:50%;top:3px;right:3px;transition:all .3s ease;box-shadow:0 2px 4px #0003}.toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background:var(--primary-gradient)}.toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:before{right:23px}.toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-primary)}.actions[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--border-light)}.btn[_ngcontent-%COMP%]{border:1px solid var(--border);background:transparent;color:var(--text-primary);border-radius:var(--radius-md);padding:.75rem 1.5rem;cursor:pointer;font-weight:600;font-size:.875rem;transition:all .25s ease;display:inline-flex;align-items:center;gap:.5rem}.btn[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);transform:translateY(-1px)}.btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}.btn--primary[_ngcontent-%COMP%]{background:var(--primary-gradient);color:#fff;border-color:transparent;box-shadow:0 4px 12px #6366f14d}.btn--primary[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #6366f166;transform:translateY(-2px)}.btn--primary[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.98)}@media (max-width: 480px){.head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.title[_ngcontent-%COMP%]{font-size:1.25rem}.form[_ngcontent-%COMP%]{padding:1.25rem}.input[_ngcontent-%COMP%]{padding:.75rem .875rem;font-size:.875rem}.actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}']})};export{N as SettingsComponent};
