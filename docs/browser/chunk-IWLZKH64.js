import{a as B}from"./chunk-SCVJ2RMO.js";import"./chunk-UWH5KVW3.js";import{a as L}from"./chunk-RDXF4Q7K.js";import{A as z,v as I,w as N,x as T}from"./chunk-4RXWAYQZ.js";import{e as F}from"./chunk-NPEF2VTF.js";import{a as A}from"./chunk-GZQS35Q3.js";import{$a as l,Ea as h,Ga as u,Ha as g,L as p,N as y,O as C,Qa as o,Ra as c,Sa as _,Wa as D,Xa as x,Ya as f,ba as r,jb as w,kb as k,lb as O,ma as M,n as b,ra as s,sb as P,ub as S,vb as E,xa as m,ya as t,za as i}from"./chunk-LKXSVSE5.js";var j=a=>["/expense",a];function R(a,n){a&1&&(t(0,"div",13)(1,"mat-icon",14),o(2,"receipt_long"),i(),t(3,"p"),o(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0635\u0631\u0648\u0641\u0627\u062A \u0644\u0647\u0630\u0627 \u0627\u0644\u064A\u0648\u0645."),i()())}function G(a,n){if(a&1&&(t(0,"div",24),o(1),i()),a&2){let e=g().$implicit;r(),c(e.description)}}function U(a,n){if(a&1){let e=h();t(0,"div",15)(1,"div",16)(2,"div",17),o(3),i(),t(4,"div",18),o(5),i(),s(6,G,2,1,"div",19),i(),t(7,"div",20),o(8),x(9,"number"),i(),t(10,"div",21)(11,"button",22)(12,"mat-icon"),o(13,"edit"),i()(),t(14,"button",23),u("click",function(){let v=y(e).$implicit,$=g();return C($.deleteExpense(v.id))}),t(15,"mat-icon"),o(16,"delete"),i()()()()}if(a&2){let e=n.$implicit;r(3),c(e.time),r(2),c(e.category),r(),m("ngIf",e.description),r(2),_("",f(9,5,e.amount,"1.0-2")," \u062C.\u0645"),r(3),m("routerLink",D(8,j,e.id))}}var V=class a{route=p(P);router=p(S);expenses=p(F);toast=p(A);confirm=p(B);date=L(this.route.paramMap.pipe(b(n=>n.get("date")??"")),{initialValue:""});fmt=new Intl.DateTimeFormat("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"});dateLabel=l(()=>{let n=this.date(),e=new Date(`${n}T00:00:00`);return Number.isNaN(e.getTime())?n:this.fmt.format(e)});items=l(()=>this.expenses.expensesByDate(this.date())());total=l(()=>this.items().reduce((n,e)=>n+e.amount,0));async deleteExpense(n){await this.confirm.confirm("\u0647\u0644 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u061F","\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0630\u0641")&&(await this.expenses.remove(n),this.toast.show("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0635\u0631\u0648\u0641","success"))}async back(){await this.router.navigateByUrl("/history")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=M({type:a,selectors:[["app-day-details"]],decls:20,vars:7,consts:[[1,"head"],[1,"page"],[1,"page__header"],["mat-icon-button","",1,"page__back",3,"click"],[1,"title"],[1,"subtitle"],[1,"card"],[1,"card__row"],[1,"label"],[1,"value"],[1,"list"],["class","empty",4,"ngIf"],["class","item",4,"ngFor","ngForOf"],[1,"empty"],[1,"empty-state__icon"],[1,"item"],[1,"item__meta"],[1,"item__time"],[1,"item__cat"],["class","item__desc",4,"ngIf"],[1,"item__amount"],[1,"item__actions"],["mat-icon-button","",3,"routerLink"],["mat-icon-button","","type","button",3,"click"],[1,"item__desc"]],template:function(e,d){e&1&&(t(0,"section",0)(1,"div",1)(2,"div",2)(3,"button",3),u("click",function(){return d.back()}),t(4,"mat-icon"),o(5,"arrow_back"),i()(),t(6,"h1",4),o(7,"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u064A\u0648\u0645"),i(),t(8,"div",5),o(9),i()()()(),t(10,"section",6)(11,"div",7)(12,"div",8),o(13,"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A"),i(),t(14,"div",9),o(15),x(16,"number"),i()()(),t(17,"section",10),s(18,R,5,0,"div",11)(19,U,17,10,"div",12),i()),e&2&&(r(9),c(d.dateLabel()),r(6),_("",f(16,4,d.total(),"1.0-2")," \u062C.\u0645"),r(3),m("ngIf",d.items().length===0),r(),m("ngForOf",d.items()))},dependencies:[k,w,E,N,I,z,T,O],styles:[".head[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:14px}.title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:900;letter-spacing:-.02em}.subtitle[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:var(--muted)}.link[_ngcontent-%COMP%]{font-size:12px;text-decoration:none;color:var(--primary);padding:8px 10px;border-radius:12px;border:1px solid var(--border);background:var(--surface);cursor:pointer}.card[_ngcontent-%COMP%]{border:1px solid var(--border);background:var(--surface);border-radius:18px;padding:14px;box-shadow:var(--shadow);margin-bottom:14px}.card__row[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;gap:10px}.label[_ngcontent-%COMP%]{color:var(--muted);font-size:12px}.value[_ngcontent-%COMP%]{font-weight:900;font-size:18px}.list[_ngcontent-%COMP%]{border:1px solid var(--border);background:var(--surface);border-radius:18px;padding:14px;box-shadow:var(--shadow)}.empty[_ngcontent-%COMP%]{padding:18px 10px;color:var(--muted);font-size:13px}.item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto auto;gap:10px;padding:12px 0;border-top:1px solid var(--border)}.item[_ngcontent-%COMP%]:first-of-type{border-top:0}.item__time[_ngcontent-%COMP%]{font-weight:900;letter-spacing:-.01em}.item__cat[_ngcontent-%COMP%]{margin-top:2px;font-size:12px;color:var(--muted)}.item__desc[_ngcontent-%COMP%]{margin-top:6px;font-size:12px;color:color-mix(in srgb,var(--text) 70%,var(--muted))}.item__amount[_ngcontent-%COMP%]{font-weight:900;white-space:nowrap}.item__actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.icon[_ngcontent-%COMP%]{border:1px solid var(--border);background:transparent;color:var(--text);border-radius:12px;padding:6px 10px;font-size:12px;cursor:pointer;text-decoration:none}.icon--danger[_ngcontent-%COMP%]{color:var(--danger)}"]})};export{V as DayDetailsComponent};
