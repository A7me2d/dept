import{a as N}from"./chunk-I7XIT37J.js";import{a as v,b as y,c as o,d as h,e as C,f as _,g as S,h as k,i as w,m as A,n as M}from"./chunk-HDFS5XVR.js";import{a as E}from"./chunk-GZQS35Q3.js";import{$a as b,Aa as u,Ga as c,L as n,Qa as r,ab as g,ba as m,ma as d,ub as f,vb as x,xa as p,ya as e,za as t}from"./chunk-LKXSVSE5.js";var P=class l{fb=n(A);settings=n(N);toast=n(E);router=n(f);current=b(()=>this.settings.settings());form=this.fb.group({dailyLimit:this.fb.control(this.current().dailyLimit,[o.required,o.min(0)]),weeklyLimit:this.fb.control(this.current().weeklyLimit,[o.required,o.min(0)]),alertsEnabled:this.fb.control(this.current().alertsEnabled)});constructor(){g(()=>{let i=this.current();this.form.dirty||this.form.patchValue({dailyLimit:i.dailyLimit,weeklyLimit:i.weeklyLimit,alertsEnabled:i.alertsEnabled},{emitEvent:!1})})}async save(){if(this.form.invalid){this.form.markAllAsTouched();return}await this.settings.update(this.form.getRawValue()),this.toast.show("\u062A\u0645 \u062D\u0641\u0638 \u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A","success"),await this.router.navigateByUrl("/")}static \u0275fac=function(a){return new(a||l)};static \u0275cmp=d({type:l,selectors:[["app-settings"]],decls:24,vars:1,consts:[[1,"head"],[1,"title"],[1,"subtitle"],["routerLink","/",1,"link"],[1,"form",3,"ngSubmit","formGroup"],[1,"field"],[1,"field__label"],["type","number","inputmode","decimal","formControlName","dailyLimit",1,"input"],["type","number","inputmode","decimal","formControlName","weeklyLimit",1,"input"],[1,"toggle"],["type","checkbox","formControlName","alertsEnabled"],[1,"actions"],["type","submit",1,"btn","btn--primary"]],template:function(a,s){a&1&&(e(0,"section",0)(1,"div")(2,"h1",1),r(3,"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A"),t(),e(4,"div",2),r(5,"\u062D\u062F\u0648\u062F \u0627\u0644\u0635\u0631\u0641 \u0648\u0627\u0644\u062A\u0646\u0628\u064A\u0647\u0627\u062A"),t()(),e(6,"a",3),r(7,"\u0631\u062C\u0648\u0639"),t()(),e(8,"form",4),c("ngSubmit",function(){return s.save()}),e(9,"label",5)(10,"div",6),r(11,"\u0627\u0644\u062D\u062F \u0627\u0644\u064A\u0648\u0645\u064A (\u062C.\u0645)"),t(),u(12,"input",7),t(),e(13,"label",5)(14,"div",6),r(15,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064A (\u062C.\u0645)"),t(),u(16,"input",8),t(),e(17,"label",9),u(18,"input",10),e(19,"span"),r(20,"\u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u062A\u0646\u0628\u064A\u0647\u0627\u062A"),t()(),e(21,"div",11)(22,"button",12),r(23,"\u062D\u0641\u0638"),t()()()),a&2&&(m(8),p("formGroup",s.form))},dependencies:[M,_,y,S,v,h,C,k,w,x],styles:[".head[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:14px}.title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:900;letter-spacing:-.02em}.subtitle[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:var(--muted)}.link[_ngcontent-%COMP%]{font-size:12px;text-decoration:none;color:var(--primary);padding:8px 10px;border-radius:12px;border:1px solid var(--border);background:var(--surface)}.form[_ngcontent-%COMP%]{border:1px solid var(--border);background:var(--surface);border-radius:18px;padding:14px;box-shadow:var(--shadow)}.field[_ngcontent-%COMP%]{display:grid;gap:8px;margin-bottom:12px}.field__label[_ngcontent-%COMP%]{font-size:12px;color:var(--muted)}.input[_ngcontent-%COMP%]{border:1px solid var(--border);background:color-mix(in srgb,var(--surface) 70%,var(--bg));border-radius:14px;padding:12px;font-size:14px;outline:none}.input[_ngcontent-%COMP%]:focus{border-color:color-mix(in srgb,var(--primary) 30%,var(--border));box-shadow:0 0 0 4px color-mix(in srgb,var(--primary) 12%,transparent)}.toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:14px;border:1px solid var(--border);background:color-mix(in srgb,var(--surface) 70%,var(--bg))}.actions[_ngcontent-%COMP%]{margin-top:12px}.btn[_ngcontent-%COMP%]{border:1px solid var(--border);background:transparent;color:var(--text);border-radius:14px;padding:10px 12px;cursor:pointer;font-weight:900}.btn--primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff;border-color:color-mix(in srgb,var(--primary) 60%,black);box-shadow:0 16px 30px #1e3a8a40}"]})};export{P as SettingsComponent};
